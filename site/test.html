<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–¢–µ—Å—Ç</title>
  <link rel="stylesheet" href="../styles.css">
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      transition: background-color 0.3s, color 0.3s;
    }
    body.light {
      background-color: #ffffff;
      color: #000000;
    }
    body.dark {
      background-color: #1a1a1a;
      color: #ffffff;
    }
    header {
      padding: 10px;
      text-align: center;
    }
    nav a {
      margin: 0 10px;
      color: inherit;
    }
    .main-container {
      padding: 20px;
      text-align: center;
    }
    .test-progress {
      width: 100%;
      background-color: #ddd;
      height: 10px;
      margin: 10px 0;
    }
    #progress-bar {
      height: 100%;
      background-color: #4caf50;
      transition: width 0.3s;
    }
    .question label {
      display: block;
      margin: 5px 0;
    }
    .test-result {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #ccc;
    }
    .notification-container {
      position: fixed;
      top: 10px;
      right: 10px;
    }
    .notification {
      background-color: #4caf50;
      color: white;
      padding: 10px;
      margin: 5px;
      border-radius: 5px;
    }
    button {
      padding: 10px 20px;
      margin: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    <h1>–¢–µ—Å—Ç –Ω–∞ –≥–µ–π–º–µ—Ä—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ</h1>
    <div>
      <button id="theme-toggle">–¢—ë–º–Ω–∞—è —Ç–µ–º–∞</button>
      <nav>
        <a href="../index.html">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="info.html">–ò–Ω—Ñ–æ</a>
        <a href="advice.html">–°–æ–≤–µ—Ç—ã</a>
        <a href="test.html">–¢–µ—Å—Ç</a>
        <a href="game.html">–ò–≥—Ä–∞</a>
        <a href="infographic.html">–ò–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞</a>
        <a href="break.html">–ü–µ—Ä–µ—Ä—ã–≤</a>
        <a href="profile.html" id="profile-link">–ü—Ä–æ—Ñ–∏–ª—å</a>
        <a href="login.html" id="login-link">–í–æ–π—Ç–∏</a>
        <a href="register.html" id="register-link">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
      </nav>
    </div>
  </header>
  <main class="main-container test-container">
    <h2>–ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ—ë –≥–µ–π–º–µ—Ä—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ!</h2>
    <p>–û—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, –∫–∞–∫ –∏–≥—Ä—ã –≤–ª–∏—è—é—Ç –Ω–∞ —Ç–µ–±—è. –ë—É–¥–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ!</p>
    <div class="test-progress"><div id="progress-bar" style="width: 0%"></div></div>
    <div id="questions"></div>
    <button id="confirm-answer" style="display: none;">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å üöÄ</button>
    <button id="submit-test" style="display: none;">–£–∑–Ω–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
    <div id="result" class="test-result" style="display: none;"></div>
  </main>
  <div class="notification-container" id="notification-container"></div>
  <footer>¬© 2025 ST. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã. –¢–∞—Ö–∏—Ä</footer>
  <script>
    // Theme & Nav
    const toggle = document.getElementById('theme-toggle');
    let currentTheme = localStorage.getItem('theme') || 'light';
    document.body.classList.add(currentTheme);
    toggle.textContent = currentTheme === 'light' ? '–¢—ë–º–Ω–∞—è —Ç–µ–º–∞' : '–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞';
    toggle.onclick = () => {
      currentTheme = currentTheme === 'light' ? 'dark' : 'light';
      document.body.classList.remove('light', 'dark');
      document.body.classList.add(currentTheme);
      localStorage.setItem('theme', currentTheme);
      toggle.textContent = currentTheme === 'light' ? '–¢—ë–º–Ω–∞—è —Ç–µ–º–∞' : '–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞';
    };
    const currentUser = localStorage.getItem('currentUser');
    if (currentUser) {
      document.getElementById('login-link').style.display = 'none';
      document.getElementById('register-link').style.display = 'none';
	};

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    const curr = localStorage.getItem('currentUser');
    if (!curr) {
      location = 'login.html';
    } else {
      document.getElementById('login-link').style.display = 'none';
      document.getElementById('register-link').style.display = 'none';
    }
    // Notification system
    const adviceList = [
      '–î–µ–ª–∞–π—Ç–µ –ø–µ—Ä–µ—Ä—ã–≤—ã –∫–∞–∂–¥—ã–π —á–∞—Å –∏–≥—Ä—ã –¥–ª—è —Ä–∞–∑–º–∏–Ω–∫–∏ –∏ –æ—Ç–¥—ã—Ö–∞.',
      '–í—ã–ø–æ–ª–Ω—è–π—Ç–µ –≥–∏–º–Ω–∞—Å—Ç–∏–∫—É –¥–ª—è –≥–ª–∞–∑: —Å–º–æ—Ç—Ä–∏—Ç–µ –≤–¥–∞–ª—å, –¥–µ–ª–∞–π—Ç–µ –∫—Ä—É–≥–æ–≤—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è.',
      '–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –≤—Ä–µ–º—è –∏–≥—Ä—ã –¥–æ 1‚Äì2 —á–∞—Å–æ–≤ –≤ –¥–µ–Ω—å.',
      '–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —ç—Ä–≥–æ–Ω–æ–º–∏–∫—É: –º–æ–Ω–∏—Ç–æ—Ä –Ω–∞ —É—Ä–æ–≤–Ω–µ –≥–ª–∞–∑, –∫—Ä–µ—Å–ª–æ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å–ø–∏–Ω—ã.',
      '–û–±–µ—Å–ø–µ—á—å—Ç–µ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ –±–µ–∑ –±–ª–∏–∫–æ–≤.',
      '–î–æ–±–∞–≤—å—Ç–µ —Ñ–∏–∑–∏—á–µ—Å–∫—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –ø—Ä–æ–≥—É–ª–∫–∏ –∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è —É–∫—Ä–µ–ø–ª—è—é—Ç –∑–¥–æ—Ä–æ–≤—å–µ.'
    ];
    function showNotification(message) {
      if (localStorage.getItem('notifications') === 'disabled') return;
      const container = document.getElementById('notification-container');
      const notif = document.createElement('div');
      notif.className = 'notification';
      notif.innerHTML = `<span>${message}</span><button onclick="this.parentElement.remove()">‚úñ</button>`;
      container.appendChild(notif);
      setTimeout(() => notif.remove(), 5000);
    }
    const users = JSON.parse(localStorage.getItem('users') || '[]');
    const user = users.find(u => u.email === currentUser);
    if (user && user.subscribed) {
      setInterval(() => {
        const randomAdvice = adviceList[Math.floor(Math.random() * adviceList.length)];
        showNotification(`–°–æ–≤–µ—Ç: ${randomAdvice}`);
      }, 60000);
    }
    setTimeout(() => showNotification('–ù–æ–≤–æ—Å—Ç—å: –°–∫–æ—Ä–æ –Ω–æ–≤—ã–π –∏–≤–µ–Ω—Ç!'), 5000);
    setTimeout(() => showNotification('–õ–°: –ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?'), 10000);
    // Word lists for Q15
    const fatigueWords = [
      '—É—Å—Ç–∞–ª', '–≤—ã–¥–æ—Ö—Å—è', '–∑–∞–º—É—á–∏–ª—Å—è', '—É—Ç–æ–º–∏–ª—Å—è', '–∏–∑–º—É—á–∏–ª—Å—è', '–≤—ã–∂–∞—Ç', '—Ä–∞–∑–±–∏—Ç', '—É–±–∏—Ç', '–Ω–∞–ø—Ä—è–≥', '—Å—Ç—Ä–µ—Å—Å',
      '–ø–µ—Ä–µ–≥—Ä—É–∑', '—Ç—è–∂–µ–ª–æ', '—Ö—Ä–µ–Ω–æ–≤–æ', '–ø–æ—Ö–µ—Ä', '–∑–∞–µ–±–∞–ª—Å—è', '–Ω–∞–¥–æ–µ–ª–æ', '–∑–∞–¥–æ–ª–±–∞–ª—Å—è', '—É—Å—Ä–∞–ª—Å—è', '–≤—ã–≥–æ—Ä–µ–ª', '–ø–∏–∑–¥–µ—Ü',
      '–≥—Ä—É—Å—Ç—å', '—Ç–æ—Å–∫–∞', '–¥–µ–ø—Ä–µ—Å—Å–∏—è', '–∞–ø–∞—Ç–∏—è', '–ª–µ–Ω—å', '–±–µ–∑ —Å–∏–ª', '—Å–ª–∞–±–æ—Å—Ç—å', '—Å–æ–Ω–Ω–æ', '–∑–µ–≤–æ—Ç–∞', '—Ç–æ—Ä–º–æ–∂—É',
      '–±–æ–ª–∏—Ç', '–ª–æ–º–æ—Ç–∞', '—Å–ø–∞–∑–º', '–¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç', '–Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ', '—Å–∫—É–∫–∞', '—Ä–∞–∑–¥—Ä–∞–∂–µ–Ω–∏–µ', '–∑–ª–æ—Å—Ç—å', '–Ω–µ—Ä–≤—ã', '—Ç—Ä–µ–≤–æ–≥–∞',
      '—É—Å—Ç–∞–ª–æ—Å—Ç—å', '–∏–∑–Ω–µ–º–æ–∂–µ–Ω–∏–µ', '–æ–ø—É—Å—Ç–æ—à–µ–Ω–∏–µ', '–ø–µ—Ä–µ—É—Ç–æ–º–ª–µ–Ω–∏–µ', '–≤—ã–≥–æ—Ä–∞–Ω–∏–µ', '–¥–∞–≤–ª–µ–Ω–∏–µ', '—Ç—è–∂–µ—Å—Ç—å', '–∏–∑–Ω–æ—Å', '–ø—Ä–æ–≤–∞–ª', '–∫—Ä–∞—Ö',
      '–∏–∑–º–æ—Ç–∞–Ω', '–Ω–∞–¥–ª–æ–º', '—É–ø–∞–¥–æ–∫', '—Ö–∞–Ω–¥—Ä–∞', '–º–µ–ª–∞–Ω—Ö–æ–ª–∏—è', '—Ç—É–º–∞–Ω', '–∑–∞—Ç–æ—Ä–º–æ–∂–µ–Ω–Ω–æ—Å—Ç—å', '–æ—Ç—É–ø–µ–Ω–∏–µ', '–∏—Å—Ç–æ—â–µ–Ω–∏–µ', '–±–µ—Å—Å–∏–ª–∏–µ',
      '–∑–∞—ë–±', '–µ–±–∞–Ω—É–ª—Å—è', '–¥–æ—Ö–ª—ã–π', '–≤—ã—Ä—É–±–∏–ª—Å—è', '—É–±–∏–ª—Å—è', '–Ω–∞–∫—Ä—ã–ª–æ', '—Å–¥–∞–ª—Å—è', '—Å–ª–æ–º–∞–ª—Å—è', '–∫–æ–Ω—á–∏–ª—Å—è', '–≤—ã–∂–∞—Ç–æ',
      '–≤—Å—ë –ø–∏–∑–¥–µ—Ü', '–ø–æ—Ö –Ω–∞ –≤—Å—ë', '–µ–±–∞—Ç—å —É—Å—Ç–∞–ª', '–∂–æ–ø–∞ –ø–æ–ª–Ω–∞—è', '—Å–∏–ª –Ω–µ—Ç'
    ];
    const positiveWords = [
      '–∫–∞–π—Ñ', '–∫—Ä—É—Ç–æ', '–∑–∞–µ–±–∏—Å—å', '–∞—Ö—É–µ–Ω–Ω–æ', '–ø–æ—Ö–µ—Ä', '–Ω–æ—Ä–º', '—á–µ—Ç–∫–æ', '–æ–≥–æ–Ω—å', '–±–ª–µ—Å–∫', '–ø—É—à–∫–∞',
      '–≤ –∫–∞–π—Ñ', '–≤–µ—Å–µ–ª–æ', '—Ä–∞–¥–æ—Å—Ç—å', '–¥—Ä–∞–π–≤', '—ç–Ω–µ—Ä–≥–∏—è', '–±–æ–¥—Ä–æ', '–∂–∞—Ä–∞', '–º–æ—â–Ω–æ', '–∫–ª–∞—Å—Å', '—à–∏–∫',
      '–ø—Ä–∏–∫–æ–ª', '—Ä–∂–∞–∫–∞', '—É–ª—ë—Ç', '—Ñ–∞–Ω', '–¥–≤–∏–∂', '—ç–ø–∏–∫', '–ø–æ–∑–∏—Ç–∏–≤', '–≤–æ—Å—Ç–æ—Ä–≥', '—ç–π—Ñ–æ—Ä–∏—è', '–ª—ë–≥–∫–æ—Å—Ç—å',
      '—Ä–µ–ª–∞–∫—Å', '—Å–ø–æ–∫–æ–π–Ω–æ', '–≥–∞—Ä–º–æ–Ω–∏—è', '–±–∞–ª–∞–Ω—Å', '–∫–æ–º—Ñ–æ—Ä—Ç', '—É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ', '–Ω–∞—Å–ª–∞–∂–¥–µ–Ω–∏–µ', '–≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ', '–º–æ—Ç–∏–≤–∞—Ü–∏—è', '–¥–∑–µ–Ω',
      '–≤–∑–ª—ë—Ç', '–∫—É—Ä–∞–∂', '—Ñ–ª–æ—É', '–∞–∑–∞—Ä—Ç', '–≤–æ–æ–¥—É—à–µ–≤–ª–µ–Ω–∏–µ', '–ª–∏–∫–æ–≤–∞–Ω–∏–µ', '—Ç—Ä–∏—É–º—Ñ', '—Å—á–∞—Å—Ç—å–µ', '—ç–∫—Å—Ç–∞–∑', '–Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ',
      '–≤–µ—Å–µ–ª—å–µ', '—Ä–∞–¥–æ—Å—Ç–Ω–æ', '–±–æ–¥—Ä–æ—Å—Ç—å', '–∂–∏–≤–æ—Å—Ç—å', '—è—Å–Ω–æ—Å—Ç—å', '–ª—ë–≥–∫–æ—Å—Ç—å', '—Å–≤–æ–±–æ–¥–∞', '–±–ª–∞–∂–µ–Ω—Å—Ç–≤–æ', '–ø—Ä–∞–∑–¥–Ω–∏–∫', '–∂–∏–∑–Ω—å',
      '–ø–æ—Ö', '–∑–∞—á—ë—Ç', '–ª—ë–≥–∫–∏–π', '–Ω–∏—à—Ç—è–∫', '–∫–∞–π—Ñ–æ–≤–æ', '–º–æ—â—å', '—Ñ–ª–µ–∫—Å', '–±–µ—Ä–∏ –≤—ã—à–µ', '–ø–æ—Ö—É—é', '–∂—ë—Å—Ç–∫–æ',
      '–≤—Å—ë –∞—Ö—É–µ–Ω–Ω–æ', '–ø–æ—Ö–µ—Ä –≤—Å—ë', '–∂–∏–∑–Ω—å –∫–∞–π—Ñ', '–∑–∞—à–∏–±–∏—Å—å', '–ø–æ—Ö –Ω–∞ –≤—Å–µ—Ö'
    ];
    const neutralWords = [
      '–Ω–æ—Ä–º–∞–ª—å–Ω–æ', '–æ–±—ã—á–Ω–æ', '–ø–æ—Ö', '–Ω–∏—á–µ–≥–æ', '—Ä–æ–≤–Ω–æ', '—Å—Ç–∞–±–∏–ª—å–Ω–æ', '—Ç–∏—Ö–æ', '—Å–ø–æ–∫–æ–π–Ω–æ', '–±–∞–ª–¥–µ–∂', '–ø–æ—Ñ–∏–≥',
      '—Å—Ä–µ–¥–Ω–µ', '–ø—Ä–æ—Ö–æ–¥–∏—Ç', '–∏–¥—ë—Ç', '–∂–¥—É', '—Ç–µ—Ä–ø–∏–º–æ', '–ø—Ä–∏–≤—ã—á–Ω–æ', '–∫–∞–∫ –≤—Å–µ–≥–¥–∞', '–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π', '–≤—Å—ë –æ–∫', '–Ω–æ—Ä–º–∞—Å',
      '—Ä–æ–≤–Ω–µ–Ω—å–∫–æ', '–ø–ª–∞–≤–Ω–æ', '—Å—Ç–∞–Ω–¥–∞—Ä—Ç', '–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ', '—Å–Ω–æ—Å–Ω–æ', '–ø–æ–π–¥—ë—Ç', '–Ω–µ–ø–ª–æ—Ö–æ', '—Å—Ç–∞–±–∏–ª—å', '–Ω–æ—Ä–º', '–∂–∏—Ç—å –º–æ–∂–Ω–æ',
      '—Ç–∏—à–∏–Ω–∞', '–±–µ–∑ —Ä–∞–∑–Ω–∏—Ü—ã', '–Ω–µ –Ω–∞–ø—Ä—è–≥–∞–µ—Ç', '–≤—Å—ë —Ä–æ–≤–Ω–æ', '–±–µ–∑ –≤–æ–ø—Ä–æ—Å–æ–≤', '–∏–¥—ë—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ', '–≤ –ø–æ—Ä—è–¥–∫–µ', '–±–µ–∑ –ø—Ä–æ–±–ª–µ–º', '–≤—Å—ë –ø—É—Ç—ë–º', '–Ω–∏—à—Ç—è–∫',
      '–ø–æ—Ö–µ—Ä', '—Ä–æ–≤–Ω—ã–π', '—Å–ø–æ–∫—É—Ö–∞', '–±–µ–∑ –¥–≤–∏–∂—É—Ö–∏', '–ø–æ –∫–∞–π—Ñ—É', '—Ç–∏–ø–∞ –Ω–æ—Ä–º', '–Ω–µ –ø–∞—Ä—é—Å—å', '–∫–∞–∫ –µ—Å—Ç—å', '–±–µ–∑ –ø–∏–∑–¥–µ—Ü–∞', '—á–æ—Ç–∫–æ',
      '–≤—Å—ë –ø–æ—Ö', '–ø–æ—Ö–µ—Ä –≤–æ–æ–±—â–µ', '–Ω–æ—Ä–º —Ç–∞–∫', '—Ç–∏–ø–∞ –æ–∫', '–±–µ–∑ —Ç—Ä—ã–Ω–¥–µ—Ü–∞'
    ];
    const negativeWords = [
      '–∑–ª–æ—Å—Ç—å', '–≥–Ω–µ–≤', '–±–µ—à–µ–Ω—Å—Ç–≤–æ', '—Ä–∞–∑–¥—Ä–∞–∂–µ–Ω–∏–µ', '–Ω–µ—Ä–≤—ã', '—Ç–∏–ª—Ç', '—è—Ä–æ—Å—Ç—å', '–∞–≥—Ä–µ—Å—Å–∏—è', '—Ñ—Ä—É—Å—Ç—Ä–∞—Ü–∏—è', '–¥–æ—Å–∞–¥–∞',
      '–æ–±–∏–¥–∞', '–∑–∞–≤–∏—Å—Ç—å', '—Ä–µ–≤–Ω–æ—Å—Ç—å', '—Å—Ç—Ä–∞—Ö', '–ø–∞–Ω–∏–∫–∞', '—Ç—Ä–µ–≤–æ–≥–∞', '–±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ', '—Å–º—è—Ç–µ–Ω–∏–µ', '—Ä–∞—Å—Ç–µ—Ä—è–Ω–Ω–æ—Å—Ç—å', '—Å–æ–º–Ω–µ–Ω–∏–µ',
      '—Å—Ç—ã–¥', '–≤–∏–Ω–∞', '—É–Ω—ã–Ω–∏–µ', '–ø–µ—á–∞–ª—å', '–≥–æ—Ä–µ', '—Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ', '–ø–æ—Ç–µ—Ä—è', '–æ—Ç—á–∞—è–Ω–∏–µ', '–±–µ–∑–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å', '–æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ',
      '—Å–∫—É–∫–∞', '—Ç–æ—Å–∫–∞', '—Ö–∞–Ω–¥—Ä–∞', '–º—Ä–∞–∫', '—É–≥—Ä—é–º–æ—Å—Ç—å', '–ø–æ–¥–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç—å', '—Ç—è–≥–æ—Å—Ç—å', '–≥—Ä—É—Å—Ç—å', '–º–µ–ª–∞–Ω—Ö–æ–ª–∏—è', '–±–µ–∑—ã—Å—Ö–æ–¥–Ω–æ—Å—Ç—å',
      '–Ω–∞–ø—Ä—è–≥', '–ø–æ—Ö–µ—Ä–∏–∑–º', '–æ–±–ª–æ–º', '–±–µ—Å–ø–æ–Ω—Ç', '—Ñ—É—Ñ–ª–æ', '—à–≤–∞—Ö', '–≥–µ–º–æ—Ä', '–∑–∞—Å—Å–∞–ª', '–ø—Ä–æ—Å—Ä–∞–ª', '–∑–∞–µ–±',
      '–≤—Å—ë —Ö—É–π–Ω—è', '–ø–æ—Ö–µ—Ä –≤—Å—ë', '–±–ª—è—Ç—å –±–µ—Å–∏—Ç', '–≤—Å—ë –∑–∞–µ–±–∞–ª–æ', '–ø–æ—Ö –Ω–∞ –≤—Å—ë'
    ];
    const questions = [
      { id: 'q1', text: '–°–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ –≤ –¥–µ–Ω—å —Ç—ã –æ–±—ã—á–Ω–æ –∏–≥—Ä–∞–µ—à—å?', type: 'radio', options: [
        { text: '–ú–µ–Ω—å—à–µ 1 —á–∞—Å–∞', score: 0 }, { text: '1‚Äì2 —á–∞—Å–∞', score: 2 }, { text: '3‚Äì4 —á–∞—Å–∞', score: 5 }, { text: '5+ —á–∞—Å–æ–≤', score: 8 }
      ]},
      { id: 'q2', text: '–ß—É–≤—Å—Ç–≤—É–µ—à—å –ª–∏ —Ç—ã —É—Å—Ç–∞–ª–æ—Å—Ç—å –≤ –≥–ª–∞–∑–∞—Ö –ø–æ—Å–ª–µ –∏–≥—Ä—ã?', type: 'radio', options: [
        { text: '–ù–∏–∫–æ–≥–¥–∞', score: 0 }, { text: '–ò–Ω–æ–≥–¥–∞', score: 3 }, { text: '–ß–∞—Å—Ç–æ', score: 6 }
      ]},
      { id: 'q3', text: '–ö–∞–∫ —á–∞—Å—Ç–æ –¥–µ–ª–∞–µ—à—å –ø–µ—Ä–µ—Ä—ã–≤—ã –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã?', type: 'radio', options: [
        { text: '–ö–∞–∂–¥—ã–π —á–∞—Å', score: 0 }, { text: '–ö–∞–∂–¥—ã–µ 2‚Äì3 —á–∞—Å–∞', score: 3 }, { text: '–†–µ–¥–∫–æ –∏–ª–∏ –Ω–∏–∫–æ–≥–¥–∞', score: 6 }
      ]},
      { id: 'q4', text: '–ö–∞–∫–∏–µ –∂–∞–Ω—Ä—ã –∏–≥—Ä —Ç—ã –ª—é–±–∏—à—å? (–≤—ã–±–µ—Ä–∏ –≤—Å–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ)', type: 'checkbox', options: [
        { text: '–®—É—Ç–µ—Ä—ã (CS2, Call of Duty)', score: 2 }, { text: 'RPG (The Witcher, Elden Ring)', score: 1 },
        { text: '–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ (StarCraft, Civilization)', score: 1 }, { text: '–ö–∞–∑—É–∞–ª—å–Ω—ã–µ (Stardew Valley)', score: 0 }
      ]},
      { id: 'q5', text: '–ö–∞–∫ —á–∞—Å—Ç–æ —Ç—ã –¥–µ–ª–∞–µ—à—å –≥–∏–º–Ω–∞—Å—Ç–∏–∫—É –¥–ª—è –≥–ª–∞–∑?', type: 'radio', options: [
        { text: '–ï–∂–µ–¥–Ω–µ–≤–Ω–æ', score: 0 }, { text: '–†–∞–∑ –≤ –Ω–µ–¥–µ–ª—é', score: 3 }, { text: '–ù–∏–∫–æ–≥–¥–∞', score: 5 }
      ]},
      { id: 'q6', text: '–ù–∞—Å–∫–æ–ª—å–∫–æ –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ —Ç–≤–æ—ë –∏–≥—Ä–æ–≤–æ–µ –º–µ—Å—Ç–æ? (0 ‚Äî —É–∂–∞—Å–Ω–æ, 10 ‚Äî –∏–¥–µ–∞–ª—å–Ω–æ)', type: 'range', min: 0, max: 10, score: v => 10 - v },
      { id: 'q7', text: '–ë—ã–≤–∞–µ—à—å –ª–∏ —Ç—ã —Ä–∞–∑–¥—Ä–∞–∂—ë–Ω –ø–æ—Å–ª–µ –ø—Ä–æ–∏–≥—Ä—ã—à–µ–π?', type: 'radio', options: [
        { text: '–ù–∏–∫–æ–≥–¥–∞', score: 0 }, { text: '–ò–Ω–æ–≥–¥–∞', score: 3 }, { text: '–ß–∞—Å—Ç–æ', score: 5 }
      ]},
      { id: 'q8', text: '–°–∫–æ–ª—å–∫–æ –≤–æ–¥—ã —Ç—ã –ø—å—ë—à—å –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã?', type: 'radio', options: [
        { text: '–ü—å—é —Ä–µ–≥—É–ª—è—Ä–Ω–æ', score: 0 }, { text: '–ò–Ω–æ–≥–¥–∞', score: 3 }, { text: '–ó–∞–±—ã–≤–∞—é', score: 5 }
      ]},
      { id: 'q9', text: '–ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ç—ã –∑–∞–º–µ—á–∞–ª –ø–æ—Å–ª–µ –¥–æ–ª–≥–∏—Ö –∏–≥—Ä–æ–≤—ã—Ö —Å–µ—Å—Å–∏–π?', type: 'checkbox', options: [
        { text: '–ë–æ–ª—å –≤ —Å–ø–∏–Ω–µ', score: 3 }, { text: '–£—Å—Ç–∞–ª–æ—Å—Ç—å –≥–ª–∞–∑', score: 3 }, { text: '–ì–æ–ª–æ–≤–Ω–∞—è –±–æ–ª—å', score: 3 }, { text: '–ù–∏—á–µ–≥–æ', score: 0 }
      ]},
      { id: 'q10', text: '–ö–∞–∫ —á–∞—Å—Ç–æ —Ç—ã –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è —Å–ø–æ—Ä—Ç–æ–º?', type: 'radio', options: [
        { text: '3+ —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é', score: 0 }, { text: '1‚Äì2 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é', score: 3 }, { text: '–†–µ–¥–∫–æ –∏–ª–∏ –Ω–∏–∫–æ–≥–¥–∞', score: 5 }
      ]},
      { id: 'q11', text: '–û—Ü–µ–Ω–∏ —Å–≤–æ–π —É—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–µ—Å—Å–∞ –æ—Ç –∏–≥—Ä (0 ‚Äî —á–∏–ª–ª, 10 ‚Äî —Ç–∏–ª—å—Ç)', type: 'range', min: 0, max: 10, score: v => v },
      { id: 'q12', text: '–ï—Å—Ç—å –ª–∏ —É —Ç–µ–±—è –æ—á–∫–∏ —Å –∞–Ω—Ç–∏–±–ª–∏–∫–æ–≤—ã–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º?', type: 'radio', options: [
        { text: '–î–∞', score: 0 }, { text: '–ù–µ—Ç', score: 3 }
      ]},
      { id: 'q13', text: '–ö–∞–∫ —Ç—ã —Å–∏–¥–∏—à—å –∑–∞ –∫–æ–º–ø–æ–º?', type: 'radio', options: [
        { text: '–ü—Ä—è–º–æ, —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å–ø–∏–Ω—ã', score: 0 }, { text: '–°–≥–æ—Ä–±–∏–≤—à–∏—Å—å', score: 4 }, { text: '–ö–∞–∫ –ø–æ–ø–∞–ª–æ', score: 6 }
      ]},
      { id: 'q14', text: '–ß—Ç–æ —Ç—ã –µ—à—å –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã?', type: 'checkbox', options: [
        { text: '–ß–∏–ø—Å—ã/—Ñ–∞—Å—Ç—Ñ—É–¥', score: 3 }, { text: '–§—Ä—É–∫—Ç—ã/–æ—Ä–µ—Ö–∏', score: 0 }, { text: '–ù–∏—á–µ–≥–æ', score: 1 }
      ]},
      { id: 'q15', text: '–û–ø–∏—à–∏ –≤ –¥–≤—É—Ö —Å–ª–æ–≤–∞—Ö —Å–≤–æ–∏ –æ—â—É—â–µ–Ω–∏—è –ø–æ—Å–ª–µ –¥–æ–ª–≥–∏—Ö –∏–≥—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—Å—ë –Ω–æ—Ä–º)', type: 'text', score: v => {
        let cleanInput = v.toLowerCase().trim().replace(/[^A-Za-z–ê-–Ø–∞-—è\s]/g, '');
        const words = cleanInput.split(/\s+/).filter(w => w.length > 0);
        if (words.length === 0) return 0;
        if (words.some(w => fatigueWords.includes(w))) return 3;
        if (words.some(w => negativeWords.includes(w))) return 2;
        if (words.some(w => neutralWords.includes(w))) return 1;
        if (words.some(w => positiveWords.includes(w))) return 0;
        return 0;
      }}
    ];
    const questionsContainer = document.getElementById('questions');
    const confirmBtn = document.getElementById('confirm-answer');
    const submitBtn = document.getElementById('submit-test');
    const resultDiv = document.getElementById('result');
    const progressBar = document.getElementById('progress-bar');
    let currentQuestion = 0;
    let answers = {};
    function renderQuestion() {
      questionsContainer.innerHTML = '';
      const q = questions[currentQuestion];
      const div = document.createElement('div');
      div.className = 'question';
      div.innerHTML = `<h4>${currentQuestion + 1}. ${q.text}</h4>`;
      if (q.type === 'radio') {
        q.options.forEach((opt, i) => {
          div.innerHTML += `
            <label><input type="radio" name="${q.id}" value="${i}" required> ${opt.text}</label>
          `;
        });
      } else if (q.type === 'checkbox') {
        q.options.forEach((opt, i) => {
          div.innerHTML += `
            <label><input type="checkbox" name="${q.id}" value="${i}"> ${opt.text}</label>
          `;
        });
      } else if (q.type === 'range') {
        div.innerHTML += `
          <input type="range" id="${q.id}" name="${q.id}" min="${q.min}" max="${q.max}" value="5">
          <span id="${q.id}-value">5</span>
        `;
      } else if (q.type === 'text') {
        div.innerHTML += `
          <input type="text" id="${q.id}" name="${q.id}" maxlength="50" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –≤—Å—ë –Ω–æ—Ä–º">
        `;
      }
      questionsContainer.appendChild(div);
      if (q.type === 'range') {
        const range = questionsContainer.querySelector(`input[name="${q.id}"]`);
        const rangeValue = document.getElementById(`${q.id}-value`);
        if (range && rangeValue) {
          range.oninput = () => rangeValue.textContent = range.value;
          range.onchange = () => answers[q.id] = parseInt(range.value);
        }
      }
      confirmBtn.style.display = (q.type === 'checkbox' || q.type === 'range') && currentQuestion < questions.length - 1 ? 'block' : 'none';
      submitBtn.style.display = currentQuestion === questions.length - 1 ? 'block' : 'none';
      progressBar.style.width = `${((currentQuestion + 1) / questions.length) * 100}%`;
    }
    function validateTextInput(value) {
      const words = value.trim().split(/\s+/).filter(w => w.length > 0);
      if (words.length > 2) {
        showNotification('–ú–∞–∫—Å–∏–º—É–º –¥–≤–∞ —Å–ª–æ–≤–∞!');
        return false;
      }
      return true;
    }
    function calculateScore() {
      let score = 0;
      questions.forEach((q, index) => {
        if (q.type === 'radio') {
          const selected = document.querySelector(`input[name="${q.id}"]:checked`);
          if (selected) score += q.options[parseInt(selected.value)].score;
        } else if (q.type === 'checkbox') {
          const checked = document.querySelectorAll(`input[name="${q.id}"]:checked`);
          checked.forEach(c => {
            score += q.options[parseInt(c.value)].score;
          });
        } else if (q.type === 'range') {
          const input = answers[q.id];
          if (input !== undefined) score += q.score(input);
        } else if (q.type === 'text') {
          const input = document.querySelector(`input[name="${q.id}"]`);
          const value = input ? input.value : (answers[q.id] || '');
          score += q.score(value);
        }
      });
      return score;
    }
    function getResultMessage(score) {
      if (score <= 20) {
        return `–ß–∏–ª–ª-–º–∞—à–∏–Ω–∞! üòé –¢—ã –≥–µ–π–º–∏—à—å —Å —É–º–æ–º, –∑–¥–æ—Ä–æ–≤—å–µ –≤ –ø–æ—Ä—è–¥–∫–µ. –ü—Ä–æ–¥–æ–ª–∂–∞–π –¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ—Ä—ã–≤—ã –∏ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –æ—Å–∞–Ω–∫–æ–π!`;
      } else if (score <= 40) {
        return `–ù–æ—Ä–º, –Ω–æ –µ—Å—Ç—å –∫—É–¥–∞ —Ä–∞—Å—Ç–∏! üòè –ò–≥—Ä—ã ‚Äî —Ç–≤–æ–π –∫–∞–π—Ñ, –Ω–æ –¥–æ–±–∞–≤—å –≥–∏–º–Ω–∞—Å—Ç–∏–∫—É –¥–ª—è –≥–ª–∞–∑ –∏ —Å–ø–æ—Ä—Ç. –ü—Ä–æ–π–¥–∏ –Ω–∞—à —Ä–∞–∑–¥–µ–ª "–°–æ–≤–µ—Ç—ã"!`;
      } else if (score <= 60) {
        return `–ë—Ä–æ, –ø–æ—Ä–∞ —á–∏–ª–∏—Ç—å! üòÖ –ò–≥—Ä—ã —Ç–µ–±—è –∑–∞—Ç—è–≥–∏–≤–∞—é—Ç, –∏ –∑–¥–æ—Ä–æ–≤—å–µ —Å—Ç—Ä–∞–¥–∞–µ—Ç. –î–µ–ª–∞–π –ø–µ—Ä–µ—Ä—ã–≤—ã –∏ –ø—Ä–æ–≤–µ—Ä—å —Ä–∞–∑–¥–µ–ª "–ü–µ—Ä–µ—Ä—ã–≤".`;
      } else {
        return `–¢–∏–ª—å—Ç-–∞–ª–µ—Ä—Ç! üö® –¢—ã –≥–µ–π–º–µ—Ä –æ—Ç –±–æ–≥–∞, –Ω–æ –∑–¥–æ—Ä–æ–≤—å–µ –≤ –∑–æ–Ω–µ —Ä–∏—Å–∫–∞. –°—Ä–æ—á–Ω–æ –¥–æ–±–∞–≤—å —Å–ø–æ—Ä—Ç, –ø–µ—Ä–µ—Ä—ã–≤—ã –∏ –≥–∏–º–Ω–∞—Å—Ç–∏–∫—É –¥–ª—è –≥–ª–∞–∑!`;
      }
    }
    renderQuestion();
    questionsContainer.onclick = e => {
      if (e.target.type === 'radio' && currentQuestion < questions.length - 1) {
        answers[questions[currentQuestion].id] = parseInt(e.target.value);
        setTimeout(() => {
          currentQuestion++;
          renderQuestion();
        }, 300);
      }
    };
    confirmBtn.onclick = () => {
      const q = questions[currentQuestion];
      if (q.type === 'checkbox') {
        const checked = document.querySelectorAll(`input[name="${q.id}"]:checked`);
        if (checked.length === 0) {
          showNotification('–í—ã–±–µ—Ä–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç!');
          return;
        }
        answers[q.id] = Array.from(checked).map(c => parseInt(c.value));
      } else if (q.type === 'range') {
        const input = document.querySelector(`input[name="${q.id}"]`);
        if (input) answers[q.id] = parseInt(input.value);
      }
      if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        renderQuestion();
      } else {
        submitBtn.style.display = 'block';
        confirmBtn.style.display = 'none';
      }
    };
    submitBtn.onclick = () => {
      const q = questions[currentQuestion];
      if (q.type === 'text') {
        const input = document.querySelector(`input[name="${q.id}"]`);
        const value = input ? input.value : '';
        if (value && !validateTextInput(value)) return;
        answers[q.id] = value;
      }
      const score = calculateScore();
      const message = getResultMessage(score);
      resultDiv.innerHTML = `<h3>–¢–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${score} –±–∞–ª–ª–æ–≤</h3><p>${message}</p>`;
      resultDiv.style.display = 'block';
      submitBtn.style.display = 'none';
      confirmBtn.style.display = 'none';
      if (user) {
        user.results = user.results || [];
        user.results.push(`–î–∞—Ç–∞: ${new Date().toLocaleDateString()}, –†–∏—Å–∫: ${score}`);
        localStorage.setItem('users', JSON.stringify(users));
        showNotification('–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ –ø—Ä–æ—Ñ–∏–ª–µ!');
      }
    };
  </script>
</body>
</html>